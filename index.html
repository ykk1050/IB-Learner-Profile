<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IB í•™ìŠµììƒ ì§„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        .hidden {
            display: none;
        }

        h1 {
            color: #667eea;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .info-box {
            background: #f0f4ff;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .info-box ul {
            list-style: none;
            padding-left: 0;
        }

        .info-box li {
            padding: 8px 0;
            color: #555;
        }

        .info-box li:before {
            content: "â€¢ ";
            color: #667eea;
            font-weight: bold;
        }

        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }

        .question-box {
            margin: 30px 0;
        }

        .question-text {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .answer-btn {
            padding: 20px;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .answer-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .answer-btn.option-5 { border-color: #667eea; }
        .answer-btn.option-5:hover { background: #f0f4ff; border-color: #667eea; }

        .answer-btn.option-4 { border-color: #60a5fa; }
        .answer-btn.option-4:hover { background: #eff6ff; border-color: #60a5fa; }

        .answer-btn.option-3 { border-color: #9ca3af; }
        .answer-btn.option-3:hover { background: #f9fafb; border-color: #9ca3af; }

        .answer-btn.option-2 { border-color: #fb923c; }
        .answer-btn.option-2:hover { background: #fff7ed; border-color: #fb923c; }

        .answer-btn.option-1 { border-color: #ef4444; }
        .answer-btn.option-1:hover { background: #fef2f2; border-color: #ef4444; }

        .result-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            color: white;
        }

        .top-profile {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 3px solid #667eea;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .medal {
            font-size: 3em;
        }

        .profile-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
        }

        .profile-name-en {
            font-size: 0.9em;
            color: #666;
        }

        .profile-score {
            text-align: right;
        }

        .score-number {
            font-size: 2.5em;
            font-weight: 700;
            color: #667eea;
        }

        .score-label {
            font-size: 0.9em;
            color: #666;
        }

        .all-scores {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .score-item {
            margin-bottom: 20px;
        }

        .score-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .score-bar-container {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .score-bar {
            height: 100%;
            background: #667eea;
            transition: width 0.5s;
        }

        .button-group {
            display: flex;
            gap: 15px;
        }

        .btn-secondary {
            flex: 1;
            background: white;
            color: #667eea;
            border: 3px solid #667eea;
        }

        .btn-secondary:hover {
            background: #f0f4ff;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .question-text {
                font-size: 1.2em;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì¸íŠ¸ë¡œ í™”ë©´ -->
        <div id="intro-screen">
            <h1>ğŸŒŸ IB í•™ìŠµììƒ ì§„ë‹¨</h1>
            <p class="subtitle">ë‚˜ëŠ” ì–´ë–¤ IB í•™ìŠµììƒì— ê°€ê¹Œìš¸ê¹Œ?</p>

            <div class="input-group">
                <label for="student-name">ì´ë¦„</label>
                <input type="text" id="student-name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>

            <div class="input-group">
                <label for="student-grade">í•™ë…„</label>
                <input type="text" id="student-grade" placeholder="ì˜ˆ: 9, 10, 11">
            </div>

            <div class="input-group">
                <label for="student-class">ë°˜</label>
                <input type="text" id="student-class" placeholder="ì˜ˆ: 1, 2, 3">
            </div>

            <div class="input-group">
                <label for="student-number">ë²ˆí˜¸</label>
                <input type="text" id="student-number" placeholder="ì˜ˆ: 1, 2, 3">
            </div>

            <div class="info-box">
                <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ì•ˆë‚´</h3>
                <ul>
                    <li>ì´ 30ê°œì˜ ì§ˆë¬¸ì— ë‹µí•˜ê²Œ ë©ë‹ˆë‹¤</li>
                    <li>ê° ì§ˆë¬¸ì— ëŒ€í•´ ìì‹ ê³¼ ì–¼ë§ˆë‚˜ ì¼ì¹˜í•˜ëŠ”ì§€ ì„ íƒí•˜ì„¸ìš”</li>
                    <li>ì •ë‹µì€ ì—†ìœ¼ë‹ˆ ì†”ì§í•˜ê²Œ ë‹µí•´ì£¼ì„¸ìš”</li>
                    <li>í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ìì‹ ì˜ IB í•™ìŠµììƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                </ul>
            </div>

            <button class="btn btn-primary" id="start-btn" disabled>ì‹œì‘í•˜ê¸°</button>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ í™”ë©´ -->
        <div id="test-screen" class="hidden">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="question-counter">ì§ˆë¬¸ 1 / 30</span>
                    <span id="progress-percent">3%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <div class="question-box">
                <h2 class="question-text" id="question-text"></h2>
            </div>

            <div class="answer-options" id="answer-options">
                <button class="answer-btn option-5" data-score="5">ë§¤ìš° ê·¸ë ‡ë‹¤</button>
                <button class="answer-btn option-4" data-score="4">ê·¸ë ‡ë‹¤</button>
                <button class="answer-btn option-3" data-score="3">ë³´í†µì´ë‹¤</button>
                <button class="answer-btn option-2" data-score="2">ê·¸ë ‡ì§€ ì•Šë‹¤</button>
                <button class="answer-btn option-1" data-score="1">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-screen" class="hidden">
            <div class="result-header">
                <h1>ğŸ‰ ì§„ë‹¨ ì™„ë£Œ!</h1>
                <p class="subtitle"><span id="result-name"></span>ë‹˜ì˜ IB í•™ìŠµììƒ ê²°ê³¼ì…ë‹ˆë‹¤</p>
            </div>

            <div class="result-card">
                <h2 style="margin-bottom: 20px;">ğŸ’ ë‚˜ì˜ ìƒìœ„ 3ê°€ì§€ í•™ìŠµììƒ</h2>
            </div>

            <div id="top-profiles"></div>

            <div class="all-scores">
                <h2 style="margin-bottom: 20px;">ğŸ“Š ì „ì²´ í•™ìŠµììƒ ì ìˆ˜</h2>
                <div id="all-scores"></div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="restart-btn">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
                <a href="dashboard.html" class="btn btn-primary" style="text-decoration: none; text-align: center;">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a>
            </div>
        </div>
    </div>

    <script>
        // IB í•™ìŠµììƒ ì •ì˜
        const learnerProfiles = {
            inquirer: { name: 'íƒêµ¬í•˜ëŠ” ì‚¬ëŒ', nameEn: 'Inquirers', emoji: 'ğŸ”' },
            knowledgeable: { name: 'ì§€ì‹ì´ í’ë¶€í•œ ì‚¬ëŒ', nameEn: 'Knowledgeable', emoji: 'ğŸ“š' },
            thinker: { name: 'ìƒê°í•˜ëŠ” ì‚¬ëŒ', nameEn: 'Thinkers', emoji: 'ğŸ’­' },
            communicator: { name: 'ì†Œí†µí•˜ëŠ” ì‚¬ëŒ', nameEn: 'Communicators', emoji: 'ğŸ’¬' },
            principled: { name: 'ì›ì¹™ì„ ì§€í‚¤ëŠ” ì‚¬ëŒ', nameEn: 'Principled', emoji: 'âš–ï¸' },
            openMinded: { name: 'ì—´ë¦° ë§ˆìŒì„ ì§€ë‹Œ ì‚¬ëŒ', nameEn: 'Open-minded', emoji: 'ğŸŒ' },
            caring: { name: 'ë°°ë ¤í•˜ëŠ” ì‚¬ëŒ', nameEn: 'Caring', emoji: 'â¤ï¸' },
            riskTaker: { name: 'ë„ì „í•˜ëŠ” ì‚¬ëŒ', nameEn: 'Risk-takers', emoji: 'ğŸš€' },
            balanced: { name: 'ê· í˜• ì¡íŒ ì‚¬ëŒ', nameEn: 'Balanced', emoji: 'âš–ï¸' },
            reflective: { name: 'ì„±ì°°í•˜ëŠ” ì‚¬ëŒ', nameEn: 'Reflective', emoji: 'ğŸ¤”' }
        };

        // ì§ˆë¬¸ ë°ì´í„°
        const questions = [
            { id: 1, text: 'ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš¸ ë•Œ ê¶ê¸ˆí•œ ì ì´ ìƒê¸°ë©´ ëê¹Œì§€ ì•Œì•„ë³´ëŠ” í¸ì´ë‹¤', profile: 'inquirer' },
            { id: 2, text: 'ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ "ì™œ?"ë¼ëŠ” ì§ˆë¬¸ì„ ìì£¼ í•œë‹¤', profile: 'inquirer' },
            { id: 3, text: 'ê´€ì‹¬ ìˆëŠ” ì£¼ì œë¥¼ ìŠ¤ìŠ¤ë¡œ ì°¾ì•„ì„œ ê¹Šì´ ìˆê²Œ ê³µë¶€í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤', profile: 'inquirer' },
            { id: 4, text: 'ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì§€ì‹ì„ ìŒ“ëŠ” ê²ƒì´ ì¦ê²ë‹¤', profile: 'knowledgeable' },
            { id: 5, text: 'ì±…ì´ë‚˜ ìë£Œë¥¼ í†µí•´ ë°°ìš´ ë‚´ìš©ì„ ì‹¤ìƒí™œì— ì ìš©í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'knowledgeable' },
            { id: 6, text: 'ì—¬ëŸ¬ ì£¼ì œì— ëŒ€í•´ í­ë„“ê²Œ ì•Œê³  ìˆëŠ” í¸ì´ë‹¤', profile: 'knowledgeable' },
            { id: 7, text: 'ë¬¸ì œë¥¼ ì—¬ëŸ¬ ê°ë„ì—ì„œ ë¶„ì„í•˜ê³  ë¹„íŒì ìœ¼ë¡œ ìƒê°í•œë‹¤', profile: 'thinker' },
            { id: 8, text: 'ë³µì¡í•œ ë¬¸ì œë„ ë…¼ë¦¬ì ìœ¼ë¡œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'thinker' },
            { id: 9, text: 'ê²°ì •ì„ ë‚´ë¦¬ê¸° ì „ì— ì‹ ì¤‘í•˜ê²Œ ìƒê°í•˜ëŠ” í¸ì´ë‹¤', profile: 'thinker' },
            { id: 10, text: 'ë‚´ ìƒê°ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ëª…í™•í•˜ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤', profile: 'communicator' },
            { id: 11, text: 'ë‹¤ì–‘í•œ ë°©ì‹(ë§, ê¸€, ê·¸ë¦¼ ë“±)ìœ¼ë¡œ ì˜ê²¬ì„ í‘œí˜„í•˜ëŠ” ê²ƒì„ ì¦ê¸´ë‹¤', profile: 'communicator' },
            { id: 12, text: 'ìƒëŒ€ë°©ì˜ ì˜ê²¬ì„ ê²½ì²­í•˜ê³  ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'communicator' },
            { id: 13, text: 'ì •ì§ê³¼ ê³µì •í•¨ì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤', profile: 'principled' },
            { id: 14, text: 'ì˜³ì§€ ì•Šì€ ì¼ì„ ë³´ë©´ ë°”ë¡œì¡ìœ¼ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'principled' },
            { id: 15, text: 'ë‚˜ì˜ í–‰ë™ì— ì±…ì„ì„ ì§€ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'principled' },
            { id: 16, text: 'ë‚˜ì™€ ë‹¤ë¥¸ ë¬¸í™”ë‚˜ ê´€ì ì„ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'openMinded' },
            { id: 17, text: 'ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë‚˜ ì˜ê²¬ì„ ë°›ì•„ë“¤ì´ëŠ” ë° ì—´ë ¤ìˆë‹¤', profile: 'openMinded' },
            { id: 18, text: 'ë‹¤ë¥¸ ì‚¬ëŒì˜ ê²¬í•´ë¥¼ ì¡´ì¤‘í•˜ë©° í¸ê²¬ ì—†ì´ ëŒ€í•œë‹¤', profile: 'openMinded' },
            { id: 19, text: 'ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì´í•´í•˜ê³  ê³µê°í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'caring' },
            { id: 20, text: 'ì–´ë ¤ìš´ ì‚¬ëŒì„ ë³´ë©´ ë„ì™€ì£¼ê³  ì‹¶ì€ ë§ˆìŒì´ ë“ ë‹¤', profile: 'caring' },
            { id: 21, text: 'ì§€ì—­ì‚¬íšŒë‚˜ í™˜ê²½ì„ ìœ„í•´ ë¬´ì–¸ê°€ í•˜ëŠ” ê²ƒì´ ì˜ë¯¸ ìˆë‹¤ê³  ìƒê°í•œë‹¤', profile: 'caring' },
            { id: 22, text: 'ìµìˆ™í•˜ì§€ ì•Šì€ ìƒí™©ì—ì„œë„ ìš©ê¸°ë¥¼ ë‚´ì–´ ë„ì „í•œë‹¤', profile: 'riskTaker' },
            { id: 23, text: 'ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ì‹œë„ë¥¼ í•œë‹¤', profile: 'riskTaker' },
            { id: 24, text: 'ë¶ˆí™•ì‹¤í•œ ìƒí™©ì—ì„œë„ ê¸ì •ì ìœ¼ë¡œ ëŒ€ì²˜í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'riskTaker' },
            { id: 25, text: 'ê³µë¶€ì™€ íœ´ì‹, ìš´ë™ì˜ ê· í˜•ì„ ë§ì¶”ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'balanced' },
            { id: 26, text: 'ë‚´ ëª¸ê³¼ ë§ˆìŒì˜ ê±´ê°•ì„ ì±™ê¸°ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤', profile: 'balanced' },
            { id: 27, text: 'ì—¬ëŸ¬ í™œë™ì— ê³¨ê³ ë£¨ ì°¸ì—¬í•˜ëŠ” í¸ì´ë‹¤', profile: 'balanced' },
            { id: 28, text: 'ë‚´ í–‰ë™ê³¼ ê²½í—˜ì„ ëŒì•„ë³´ë©° ë°°ì›€ì„ ì–»ìœ¼ë ¤ê³  í•œë‹¤', profile: 'reflective' },
            { id: 29, text: 'ë‚˜ì˜ ê°•ì ê³¼ ì•½ì ì„ íŒŒì•…í•˜ê³  ê°œì„ í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤', profile: 'reflective' },
            { id: 30, text: 'ê²½í—˜ì„ í†µí•´ ë°°ìš´ ê²ƒì„ ë‹¤ìŒì— í™œìš©í•œë‹¤', profile: 'reflective' }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let currentQuestion = 0;
        let answers = {};
        let studentName = '';
        let studentGrade = '';
        let studentClass = '';
        let studentNumber = '';

        // DOM ìš”ì†Œ
        const introScreen = document.getElementById('intro-screen');
        const testScreen = document.getElementById('test-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const studentNameInput = document.getElementById('student-name');
        const studentGradeInput = document.getElementById('student-grade');
        const studentClassInput = document.getElementById('student-class');
        const studentNumberInput = document.getElementById('student-number');
        const questionText = document.getElementById('question-text');
        const questionCounter = document.getElementById('question-counter');
        const progressPercent = document.getElementById('progress-percent');
        const progressFill = document.getElementById('progress-fill');
        const answerOptions = document.getElementById('answer-options');
        const restartBtn = document.getElementById('restart-btn');

        // ì…ë ¥ í™•ì¸
        function checkInputs() {
            const nameValue = studentNameInput.value.trim();
            const gradeValue = studentGradeInput.value.trim();
            const classValue = studentClassInput.value.trim();
            const numberValue = studentNumberInput.value.trim();
            startBtn.disabled = !(nameValue && gradeValue && classValue && numberValue);
        }

        studentNameInput.addEventListener('input', checkInputs);
        studentGradeInput.addEventListener('input', checkInputs);
        studentClassInput.addEventListener('input', checkInputs);
        studentNumberInput.addEventListener('input', checkInputs);

        // ì‹œì‘ ë²„íŠ¼
        startBtn.addEventListener('click', () => {
            studentName = studentNameInput.value.trim();
            studentGrade = studentGradeInput.value.trim();
            studentClass = studentClassInput.value.trim();
            studentNumber = studentNumberInput.value.trim();
            introScreen.classList.add('hidden');
            testScreen.classList.remove('hidden');
            showQuestion();
        });

        // ì§ˆë¬¸ í‘œì‹œ
        function showQuestion() {
            const question = questions[currentQuestion];
            questionText.textContent = question.text;
            questionCounter.textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length}`;
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressPercent.textContent = `${Math.round(progress)}%`;
            progressFill.style.width = `${progress}%`;
        }

        // ë‹µë³€ ì„ íƒ
        answerOptions.addEventListener('click', (e) => {
            if (e.target.classList.contains('answer-btn')) {
                const score = parseInt(e.target.dataset.score);
                answers[questions[currentQuestion].id] = score;

                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    showQuestion();
                } else {
                    calculateResults();
                }
            }
        });

        // ê²°ê³¼ ê³„ì‚°
        function calculateResults() {
            const scores = {};
            Object.keys(learnerProfiles).forEach(profile => {
                scores[profile] = 0;
            });

            questions.forEach(q => {
                const score = answers[q.id] || 0;
                scores[q.profile] += score;
            });

            // ì •ê·œí™” (0-100%)
            const maxScore = 15;
            const normalizedScores = {};
            Object.keys(scores).forEach(profile => {
                normalizedScores[profile] = Math.round((scores[profile] / maxScore) * 100);
            });

            // ìƒìœ„ 3ê°œ
            const sortedProfiles = Object.entries(normalizedScores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);

            // ì €ì¥
            const result = {
                name: studentName,
                grade: studentGrade,
                class: studentClass,
                number: studentNumber,
                date: new Date().toISOString(),
                scores: normalizedScores,
                topProfiles: sortedProfiles
            };

            const existing = JSON.parse(localStorage.getItem('ibTestResults') || '[]');
            existing.push(result);
            localStorage.setItem('ibTestResults', JSON.stringify(existing));

            showResults(normalizedScores, sortedProfiles);
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResults(scores, topProfiles) {
            testScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            document.getElementById('result-name').textContent = studentName;

            // ìƒìœ„ 3ê°œ
            const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
            const topProfilesHtml = topProfiles.map((profile, index) => {
                const profileData = learnerProfiles[profile[0]];
                return `
                    <div class="top-profile">
                        <div class="profile-info">
                            <div class="medal">${medals[index]}</div>
                            <div>
                                <div class="profile-name">${profileData.emoji} ${profileData.name}</div>
                                <div class="profile-name-en">${profileData.nameEn}</div>
                            </div>
                        </div>
                        <div class="profile-score">
                            <div class="score-number">${profile[1]}%</div>
                            <div class="score-label">ì¼ì¹˜ë„</div>
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('top-profiles').innerHTML = topProfilesHtml;

            // ì „ì²´ ì ìˆ˜
            const allScoresHtml = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .map(([profileKey, score]) => {
                    const profileData = learnerProfiles[profileKey];
                    return `
                        <div class="score-item">
                            <div class="score-header">
                                <span>${profileData.emoji} ${profileData.name}</span>
                                <span>${score}%</span>
                            </div>
                            <div class="score-bar-container">
                                <div class="score-bar" style="width: ${score}%"></div>
                            </div>
                        </div>
                    `;
                }).join('');
            document.getElementById('all-scores').innerHTML = allScoresHtml;
        }

        // ë‹¤ì‹œ ì‹œì‘
        restartBtn.addEventListener('click', () => {
            currentQuestion = 0;
            answers = {};
            studentName = '';
            studentGrade = '';
            studentClass = '';
            studentNumber = '';
            studentNameInput.value = '';
            studentGradeInput.value = '';
            studentClassInput.value = '';
            studentNumberInput.value = '';
            startBtn.disabled = true;
            resultScreen.classList.add('hidden');
            introScreen.classList.remove('hidden');
        });
    </script>
</body>
</html>